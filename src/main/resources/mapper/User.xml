<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.enjoytrip.dao.user.UserDao">

	<insert id="createUser" parameterType="User">
		INSERT INTO user
			(id, pw, name, email)
		VALUES
			(#{id}, #{pw}, #{name}, #{email})
	</insert>

	<select id="searchUser" parameterType="UserSearch" resultType="User">
		SELECT
			user_id, id, pw, name, email, pic
		FROM
			user
		WHERE
		<trim prefixOverrides="AND">
			<if test="userId != null">
				AND user_id = #{userId}
			</if>
			<if test="pw != null">
				AND pw = #{pw}
			</if>
			<!-- id, name, email은 검색 조건 -->
			<if test="id != null">
				AND id LIKE CONCAT('%', #{id}, '%')
			</if>
			<if test="name != null">
				AND name LIKE CONCAT('%', #{name}, '%')
			</if>
			<if test="email != null">
				AND email LIKE CONCAT('%', #{email}, '%')
			</if>
		</trim>
	</select>
	
	<update id="updateUser" parameterType="User">
		UPDATE user
		SET
			id = #{id},
			pw = #{pw},
			name = #{name},
			email = #{email},
			pic = #{pic}
		WHERE
			user_id = #{userId}
	</update>
	
	<delete id="deleteUser" parameterType="java.lang.Long">
		DELETE from user
		WHERE user_id = #{userId};
	</delete>

</mapper>